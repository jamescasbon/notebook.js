(function(){var j,k,i,l,g,f=function(f,d){return function(){return f.apply(d,arguments)}},p=Object.prototype.hasOwnProperty,m=function(f,d){function c(){this.constructor=f}for(var n in d)p.call(d,n)&&(f[n]=d[n]);c.prototype=d.prototype;f.prototype=new c;f.__super__=d.prototype;return f};g="undefined"!==typeof exports&&null!==exports?exports:this;i=function(h){function d(){this.serialize=f(this.serialize,this);this.readyCells=f(this.readyCells,this);this.initialize=f(this.initialize,this);this.defaults=
f(this.defaults,this);d.__super__.constructor.apply(this,arguments)}m(d,h);d.prototype.defaults=function(){return{title:"untitled"}};d.prototype.initialize=function(){};d.prototype.readyCells=function(){this.cells=new k;return this.cells.localStorage=new Store("cells-"+this.get("id"))};d.prototype.serialize=function(){var c;c=this.toJSON();c.cells=this.cells.toJSON();return JSON.stringify(c)};return d}(Backbone.Model);l=function(f){function d(){d.__super__.constructor.apply(this,arguments)}m(d,f);
d.prototype.model=i;d.prototype.localStorage=new Store("notebook.js");return d}(Backbone.Collection);j=function(h){function d(){this.handleMessage=f(this.handleMessage,this);this.evaluateError=f(this.evaluateError,this);this.evaluateSuccess=f(this.evaluateSuccess,this);this.interrupt=f(this.interrupt,this);this.evaluate=f(this.evaluate,this);this.toggleInputFold=f(this.toggleInputFold,this);this.toggleType=f(this.toggleType,this);this.defaults=f(this.defaults,this);d.__super__.constructor.apply(this,
arguments)}m(d,h);d.prototype.tagName="li";d.prototype.defaults=function(){return{input:"",type:"javascript",inputFold:!1,output:null,position:null,error:null,state:null}};d.prototype.toggleType=function(){"javascript"===this.get("type")?this.set({type:"markdown"}):this.set({type:"javascript"});return this.set({state:"dirty"})};d.prototype.toggleInputFold=function(){this.set({inputFold:!this.get("inputFold")});return this.save()};d.prototype.evaluate=function(){this.set({output:null,error:null});
this.set({state:"evaluating"});this.save();this.handler=g.engines[this.get("type")];return this.handler.evaluate(this.get("input"),this)};d.prototype.interrupt=function(){if(null!=this.handler)return this.onPrint("Interrupted","error"),this.handler.interrupt(),this.set({state:null}),this.save()};d.prototype.evaluateSuccess=function(c){this.set({output:c,error:null});return this.save()};d.prototype.evaluateError=function(c){this.set({error:c});return this.save};d.prototype.handleMessage=function(c){switch(c.msg){case "evalEnd":return this.set({state:null}),
this.save();case "error":return this.onPrint(c.data,"error");case "print":return this.onPrint(c.data,"print");case "result":return this.onPrint(c.data,"print");case "raw":return this.onPrint(c.data,"raw")}};d.prototype.onError=function(c){return this.set({error:c})};d.prototype.onPrint=function(c,d){return this.set({output:(this.get("output")||"").concat('<div class="'+d+'">'+c+"</div>")})};return d}(Backbone.Model);k=function(h){function d(){this.comparator=f(this.comparator,this);d.__super__.constructor.apply(this,
arguments)}m(d,h);d.prototype.model=j;d.prototype.posJump=Math.pow(2,16);d.prototype.comparator=function(c,d){c=c.get("position");d=d.get("position");return c>d?1:c<d?-1:0};d.prototype.createAtEnd=function(){return this.create({position:this.length?this.at(this.length-1).get("position")+this.posJump:this.posJump})};d.prototype.createBefore=function(c){var d;d=this.indexOf(c);c=c.get("position");d=0===d?0:this.at(d-1).get("position");return this.create({position:(c+d)/2})};return d}(Backbone.Collection);
g.Notebook=i;g.Cell=j;g.Notebooks=l;g.Cells=k}).call(this);(function(){var j,k,i,l,g=function(f,g){return function(){return f.apply(g,arguments)}};l="undefined"!==typeof exports&&null!==exports?exports:this;(function(){function f(){this.evaluate=g(this.evaluate,this)}f.prototype.evaluate=function(f,g){var h;try{if(h=eval(f),null!=h)return console.log("result",h),g.handleMessage({msg:"result",data:h.toString()})}catch(d){return console.log(d.message,d.stack),g.handleMessage({msg:"error",data:d.toString()})}finally{g.handleMessage({msg:"evalEnd"})}};return f})();
j=function(){function f(){this.evaluate=g(this.evaluate,this)}f.prototype.evaluate=function(f,g){var h,d;try{return d=new Showdown.converter,h=d.makeHtml(f),g.handleMessage({msg:"raw",data:h})}catch(c){return console.log(c.message),onErr(c.message)}finally{g.handleMessage({msg:"evalEnd"})}};return f}();k=function(){function f(){this.interrupt=g(this.interrupt,this);this.handleMessage=g(this.handleMessage,this);this.evaluate=g(this.evaluate,this);this.worker=new Worker("/src/worker.js");this.worker.onmessage=
this.handleMessage;this.inputId=0;this.handlers={}}f.prototype.evaluate=function(f,g){this.inputId+=1;this.handlers[this.inputId]=g;return this.worker.postMessage({src:f,id:this.inputId})};f.prototype.handleMessage=function(f){return this.handlers[f.data.inputId].handleMessage(f.data)};f.prototype.interrupt=function(){this.worker.terminate();this.worker=new Worker("/src/worker.js");return this.worker.onmessage=this.handleMessage};return f}();i={};i.javascript=new k;i.markdown=new j;l.engines=i}).call(this);(function(){var j,k,i,l,g,f,p,m,h,d,c,n,s,r,q,e=function(c,b){return function(){return c.apply(b,arguments)}},t=Object.prototype.hasOwnProperty,o=function(c,b){function a(){this.constructor=c}for(var d in b)t.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};_.templateSettings={interpolate:/\[\[=(.+?)\]\]/g,evaluate:/\[\[(.+?)\]\]/g};c="undefined"!==typeof exports&&null!==exports?exports:this;m=function(c){var b,a,d;a=$(window).scrollTop()+60;b=$(window).scrollTop()+
$(window).height()-30;d=c.offset().top;return d+c.height()<=b&&d>=a};r=function(c){c=c.offset().top-90;console.log("stat",c);return $(window).scrollTop(c)};s=function(c){c=c.offset().top+c.height()+60-$(window).height();console.log("stab",c);return $("body").scrollTop(c)};j=function(c){function b(){this.generateToc=e(this.generateToc,this);this.typeset=e(this.typeset,this);this.share=e(this.share,this);this.saveToFile=e(this.saveToFile,this);this.mathjaxReady=e(this.mathjaxReady,this);this.handleTocJump=
e(this.handleTocJump,this);b.__super__.constructor.apply(this,arguments)}o(b,c);b.prototype.className="app";b.prototype.handleTocJump=function(a){window.e=a;if(a=$(a.target).attr("href"))return a=$("#"+a),r(a)};b.prototype.mathjaxReady=function(){return this.typeset()};b.prototype.saveToFile=function(){return n(this.model.serialize())};b.prototype.share=function(){var a,b;a=btoa(this.model.serialize());b=escape("http://notebookjs.me/#import/"+a+"/");a=_.template($("#share-notebook").html());console.log("template");
console.log(b);return window.open("data:text/html;charset=utf-8,"+a({url:b}))};b.prototype.typeset=function(){var a,b,c,d;prettyPrint();d=this.$("#notebook");b=0;for(c=d.length;b<c;b++)a=d[b],console.log("tp",a),MathJax.Hub.Typeset(a);return this.$("#toc").html(this.generateToc())};b.prototype.generateToc=function(){var a;a=$(document.createElement("div"));this.$(".cell").each(function(b,c){var d;d=$(document.createElement("div")).appendTo(a);d.addClass("toc-cell");d.attr("href",$(c).attr("id"));
return $(c).find("h1, h2, h3").each(function(c,d){var e,f;f="title"+b+"_"+c;$(d).attr("id",f);e=$(document.createElement("div"));e.addClass(d.tagName);e.addClass("toc-entry");e.attr("href",f);e.html($(d).html());return a.append(e)})});return a};return b}(Backbone.View);p=function(d){function b(){this.renderCell=e(this.renderCell,this);this.addAll=e(this.addAll,this);this.addOne=e(this.addOne,this);this.render=e(this.render,this);this.initialize=e(this.initialize,this);this.toggleEdit=e(this.toggleEdit,
this);b.__super__.constructor.apply(this,arguments)}o(b,d);b.prototype.events={"click #toc":"handleTocJump","click #toggle-edit":"toggleEdit","click #save-to-file":"saveToFile","click #share-url":"share"};b.prototype.toggleEdit=function(){return c.router.navigate(this.model.get("id")+"/edit/",{trigger:!0})};b.prototype.initialize=function(){this.template=_.template($("#notebook-template").html());this.cellTemplate=_.template($("#cell-view-template").html());$(".container").append(this.render());this.cells=
this.$(".cells");console.log(this.cells);this.model.cells.fetch({success:this.addAll});if(c.mathjaxReady)return this.typeset()};b.prototype.render=function(){$(this.el).html(this.template());return this.el};b.prototype.addOne=function(a){return this.cells.append(this.renderCell(a))};b.prototype.addAll=function(a){return a.each(this.addOne)};b.prototype.renderCell=function(a){a=a.toJSON();a.input=a.input.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this.cellTemplate(a)};return b}(j);
i=function(d){function b(){this.saveToFile=e(this.saveToFile,this);this.toggleEdit=e(this.toggleEdit,this);this.spawnKeypress=e(this.spawnKeypress,this);this.spawnCellAtEnd=e(this.spawnCellAtEnd,this);this.addAll=e(this.addAll,this);this.addOne=e(this.addOne,this);this.render=e(this.render,this);this.initialize=e(this.initialize,this);this.events=e(this.events,this);b.__super__.constructor.apply(this,arguments)}o(b,d);b.prototype.events=function(){return{"click #toc":"handleTocJump","dblclick #spawner":"spawnCellAtEnd",
"keyup #spawner":"spawnKeypress","click #toggle-edit":"toggleEdit","click #save-to-file":"saveToFile","click #share-url":"share"}};b.prototype.initialize=function(){this.template=_.template($("#notebook-template").html());$(".container").append(this.render());this.cells=this.$(".cells");this.model.cells.bind("add",this.addOne);this.model.cells.bind("refresh",this.addAll);this.model.cells.fetch({success:this.addAll});if(c.mathjaxReady)return console.log("calling typeset at init"),this.typeset()};b.prototype.render=
function(){$(this.el).html(this.template());return this.el};b.prototype.addOne=function(a){var b,d;c.c=a;d=new k({model:a});b=d.render();a=this.model.cells.indexOf(a);0===a?this.cells.prepend(b):(a=this.model.cells.at(a-1),a=a.view,$(a.el).after(b));d.afterDomInsert();return d.focusInput()};b.prototype.addAll=function(a){return a.each(this.addOne)};b.prototype.spawnCellAtEnd=function(){return this.model.cells.createAtEnd()};b.prototype.spawnKeypress=function(a){if(13===a.keyCode)return this.model.cells.createAtEnd();
if(38===a.keyCode)return a=this.model.cells.length,this.model.cells.at(a-1).view.output.focus()};b.prototype.toggleEdit=function(){return c.router.navigate(this.model.get("id")+"/view/",{trigger:!0})};b.prototype.saveToFile=function(){return n(this.model.serialize())};return b}(j);k=function(d){function b(){this.resizeEditor=e(this.resizeEditor,this);this.inputChange=e(this.inputChange,this);this.toggle=e(this.toggle,this);this.spawnAbove=e(this.spawnAbove,this);this.remove=e(this.remove,this);this.interrupt=
e(this.interrupt,this);this.destroy=e(this.destroy,this);this.evaluate=e(this.evaluate,this);this.setEditorHighlightMode=e(this.setEditorHighlightMode,this);this.focusCellBelow=e(this.focusCellBelow,this);this.focusCellAbove=e(this.focusCellAbove,this);this.blurInput=e(this.blurInput,this);this.focusInput=e(this.focusInput,this);this.changeInputFold=e(this.changeInputFold,this);this.toggleInputFold=e(this.toggleInputFold,this);this.handleKeypress=e(this.handleKeypress,this);this.afterDomInsert=e(this.afterDomInsert,
this);this.changeState=e(this.changeState,this);this.changeOutput=e(this.changeOutput,this);this.changeType=e(this.changeType,this);this.render=e(this.render,this);this.logev=e(this.logev,this);this.initialize=e(this.initialize,this);this.events=e(this.events,this);b.__super__.constructor.apply(this,arguments)}o(b,d);b.prototype.tagName="li";b.prototype.events=function(){return{"keyup .spawn-above":"handleKeypress","dblclick .spawn-above":"spawnAbove","click .evaluate":"evaluate","click .delete":"destroy",
"click .toggle":"toggle","click .type":"toggle","click .fold-button":"toggleInputFold","dblclick .cell-output":"toggleInputFold",evaluate:"evaluate",toggle:"toggle","click .interrupt":"interrupt","keyup .cell-output":"handleKeypress","focus .cell-input":"focusInput","blur .cell-input":"blurInput"}};b.prototype.initialize=function(){this.template=_.template($("#cell-edit-template").html());this.model.bind("change:state",this.changeState);this.model.bind("change:type",this.changeType);this.model.bind("change:output",
this.changeOutput);this.model.bind("change:inputFold",this.changeInputFold);this.model.bind("destroy",this.remove);this.model.view=this;return this.editor=null};b.prototype.logev=function(a){return console.log("in ev",a)};b.prototype.render=function(){var a;null==this.editor&&(a=this.model.toJSON(),null==this.model.id&&(a.id=this.model.cid),$(this.el).html(this.template(a)),this.spawn=this.$(".spawn-above"),this.input=this.$(".cell-input"),this.output=this.$(".cell-output"),this.inputContainer=this.$(".ace-container"),
this.type=this.$(".type"),this.intButton=this.$(".interrupt"),this.evalButton=this.$(".evaluate"));return this.el};b.prototype.changeType=function(){this.setEditorHighlightMode();return this.type.html(this.model.get("type"))};b.prototype.changeOutput=function(){this.output.html(this.model.get("output"));if(c.mathjaxReady)return MathJax.Hub.Typeset(this.output[0])};b.prototype.changeState=function(){switch(this.model.get("state")){case "evaluating":return this.output.html("..."),this.intButton.addClass("active"),
this.evalButton.removeClass("active");case "dirty":return this.evalButton.addClass("active");case null:return this.intButton.removeClass("active")}};b.prototype.afterDomInsert=function(){var a,b,c,d=this;this.editor=ace.edit("input-"+(null!=this.model.id?this.model.id:this.model.cid));this.model.set({state:null});this.editor.getSession().setUseWrapMode(!0);this.editor.renderer.setShowGutter(!1);this.editor.renderer.setHScrollBarAlwaysVisible(!1);this.editor.renderer.setShowPrintMargin(!1);this.editor.setHighlightActiveLine(!1);
this.$(".ace_sb").css({display:"none"});this.resizeEditor();this.editor.getSession().on("change",this.inputChange);this.setEditorHighlightMode();b=this.model.get("input");a=Math.max(3-_.string.count(b,"\n"),0);console.log("crs");c=_.range(a);a=0;for(c=c.length;a<c;a++)b+="\n";this.editor.getSession().setValue(b);this.model.get("inputFold")&&this.changeInputFold();this.editor.commands.addCommand({name:"evaluate",bindKey:{win:"Ctrl-E",mac:"Command-E",sender:"editor"},exec:function(){return d.evaluate()}});
this.editor.commands.addCommand({name:"toggleMode",bindKey:{win:"Ctrl-M",mac:"Command-M",sender:"editor"},exec:function(){return d.toggle()}});this.editor.commands.addCommand({name:"interrupt",bindKey:{win:"Ctrl-C",mac:"Ctrl-C",sender:"editor"},exec:function(){return d.interrupt()}});this.editor.commands.addCommand({name:"golineup",bindKey:{win:"Up",mac:"Up|Ctrl-P",sender:"editor"},exec:function(a,b){var c;c=d.$(".ace_cursor");m(c)||r(c);return 0===a.getSession().getSelection().getCursor().row?(d.spawn.focus(),
d.rogueKeyup=!0):a.navigateUp(b.times)}});this.editor.commands.addCommand({name:"golinedown",bindKey:{win:"Down",mac:"Down",sender:"editor"},exec:function(a,b){var c,e;c=d.$(".ace_cursor");m(c)||s(c);e=a.getSession().getSelection().getCursor().row;c=d.editor.getSession().getDocument().getLength()-1;return e===c?(d.output.focus(),d.rogueKeyup=!0):a.navigateDown(b.times)}});return this.editor.commands.addCommand({name:"backspace",bindKey:{win:"Backspace",mac:"Backspace",sender:"editor"},exec:function(a){a=
a.getSession();return 1===a.getLength()&&""===a.getValue()?d.destroy():d.editor.remove("left")}})};b.prototype.handleKeypress=function(a){var b,c;if(!0===this.rogueKeyup)this.rogueKeyup=!1;else if(b=this.model.get("inputFold"),c=a.target.className,38===a.keyCode)switch(c){case "cell-output":return b?this.spawn.focus():this.focusInput("bottom");case "spawn-above":return this.focusCellAbove()}else if(40===a.keyCode)switch(c){case "cell-output":return this.focusCellBelow();case "spawn-above":return b?
this.output.focus():this.focusInput("top")}else if(13===a.keyCode)switch(c){case "spawn-above":return this.spawnAbove();case "cell-output":return this.toggleInputFold()}};b.prototype.toggleInputFold=function(){return this.model.toggleInputFold()};b.prototype.changeInputFold=function(){this.inputContainer.toggleClass("input-fold");this.$(".fold-button").toggleClass("input-fold");return this.$("hr").toggleClass("input-fold")};b.prototype.focusInput=function(a){"top"===a?(this.editor.gotoLine(1),this.editor.focus()):
"bottom"===a&&(this.editor.gotoLine(this.editor.getSession().getDocument().getLength()),this.editor.focus());if(null!=this.editor)return this.editor.setHighlightActiveLine(!0),this.$(".ace_cursor-layer").show()};b.prototype.blurInput=function(){if(null!=this.editor)return this.editor.setHighlightActiveLine(!1),this.$(".ace_cursor-layer").hide()};b.prototype.focusCellAbove=function(){var a;a=this.model.collection.at(this.model.collection.indexOf(this.model)-1);if(null!=a)return a.view.output.focus()};
b.prototype.focusCellBelow=function(){var a;a=this.model.collection.at(this.model.collection.indexOf(this.model)+1);return null!=a?a.view.spawn.focus():$("#spawner").focus()};b.prototype.setEditorHighlightMode=function(){var a;"javascript"===this.model.get("type")?a=require("ace/mode/javascript").Mode:"markdown"===this.model.get("type")&&(a=require("ace/mode/markdown").Mode);if(null!=a)return this.editor.getSession().setMode(new a)};b.prototype.evaluate=function(){this.model.set({input:this.editor.getSession().getValue()});
return this.model.evaluate()};b.prototype.destroy=function(){return this.model.destroy()};b.prototype.interrupt=function(){return this.model.interrupt()};b.prototype.remove=function(){return $(this.el).fadeOut("fast",$(this.el).remove)};b.prototype.spawnAbove=function(){return this.model.collection.createBefore(this.model)};b.prototype.toggle=function(){return this.model.toggleType()};b.prototype.inputChange=function(){this.model.set({state:"dirty"});return this.resizeEditor()};b.prototype.resizeEditor=
function(){var a,b;a=this.editor.renderer.$textLayer.getLineHeight();b=this.editor.getSession().getScreenLength();if(1===a)setTimeout(this.resizeEditor,200);else return this.$(".ace-container").height(20+a*b),this.editor.resize()};return b}(Backbone.View);l=function(d){function b(){this.mathjaxReady=e(this.mathjaxReady,this);this.loadFile=e(this.loadFile,this);this["new"]=e(this["new"],this);this.addNbs=e(this.addNbs,this);this.addNb=e(this.addNb,this);this.render=e(this.render,this);this.initialize=
e(this.initialize,this);b.__super__.constructor.apply(this,arguments)}o(b,d);b.prototype.className="app";b.prototype.events={"click #new-notebook-button":"new","change #load-file":"loadFile"};b.prototype.initialize=function(){this.template=_.template($("#index-template").html());$(".container").append(this.render());return this.addNbs()};b.prototype.render=function(){$(this.el).html(this.template());return this.el};b.prototype.addNb=function(a){return $("#notebooks").append(this.nbtemplate(a.toJSON()))};
b.prototype.addNbs=function(){this.nbtemplate=_.template($("#notebook-index-template").html());return c.notebooks.each(this.addNb)};b.prototype["new"]=function(){console.log("new");return c.router.navigate("new/",{trigger:!0})};b.prototype.loadFile=function(a){var b,a=a.target.files[0];b=new FileReader;b.onload=function(a){a=JSON.parse(a.target.result);a=h(a);return c.router.navigate(a.get("id")+"/view/",{trigger:!0})};return b.readAsText(a)};b.prototype.mathjaxReady=function(){};return b}(Backbone.View);
g=function(d){function b(){this.mathjaxReady=e(this.mathjaxReady,this);this.create=e(this.create,this);this.render=e(this.render,this);this.initialize=e(this.initialize,this);b.__super__.constructor.apply(this,arguments)}o(b,d);b.prototype.className="app";b.prototype.events={"click button":"create"};b.prototype.initialize=function(){this.template=_.template($("#new-notebook-form").html());return $(".container").append(this.render())};b.prototype.render=function(){$(this.el).html(this.template());
return this.el};b.prototype.create=function(){var a;a=c.notebooks.create({title:this.$("input").val()});a.readyCells();a.cells.create({position:a.cells.posJump});return c.router.navigate(a.id+"/edit/",{trigger:!0})};b.prototype.mathjaxReady=function(){};return b}(Backbone.View);f=function(d){function b(){this["import"]=e(this["import"],this);this.loadUrl=e(this.loadUrl,this);this.index=e(this.index,this);this["new"]=e(this["new"],this);this["delete"]=e(this["delete"],this);this.view=e(this.view,this);
this.edit=e(this.edit,this);this.getNotebook=e(this.getNotebook,this);this.unmatched=e(this.unmatched,this);b.__super__.constructor.apply(this,arguments)}o(b,d);b.prototype.routes={":nb/edit/":"edit",":nb/view/":"view",":nb/delete/":"delete","load/*url":"loadUrl","new/":"new","import/*data/":"import","":"index"};b.prototype.unmatched=function(a){return console.log(a)};b.prototype.getNotebook=function(a){a=c.notebooks.get(a);a.readyCells();c.nb=a;console.log("notebook loaded; id="+a.get("id"));return a};
b.prototype.edit=function(a){c.app&&c.app.remove();console.log("activated edit route",a);a=this.getNotebook(a);c.app=new i({model:a});return q(a.get("title")+" (Editing)")};b.prototype.view=function(a){c.app&&c.app.remove();console.log("activated view route");a=this.getNotebook(a);q(a.get("title")+" (Viewing)");return c.app=new p({model:a})};b.prototype["delete"]=function(a){console.log("deleting nb",a);confirm("You really want to delete that?")&&(a=this.getNotebook(a),a.cells.fetch({success:function(a){return a.each(function(a){console.log("destroy",
a);return a.destroy()})}}),console.log("cells",a.cells.length),a.destroy(),console.log("deleted"));return c.router.navigate("",{trigger:!0})};b.prototype["new"]=function(){console.log("new view");c.app&&c.app.remove();return c.app=new g};b.prototype.index=function(){c.app&&(c.app.remove(),c.nb=null);console.log("index view");q("");return c.app=new l};b.prototype.loadUrl=function(a){console.log("loading url");return $.getJSON(a,function(a){a=h(a);return c.router.navigate(a.get("id")+"/view/",{trigger:!0})})};
b.prototype["import"]=function(a){a=JSON.parse(atob(a));a=h(a);return c.router.navigate(a.get("id")+"/view/",{trigger:!0})};return b}(Backbone.Router);q=function(c){return $("#title").html(c)};n=function(c){return window.open("data:text/json;filename=data.json;charset=utf-8,"+escape(c))};h=function(d){var b,a,e,f,g,h;a=d.cells;delete d.cells;d.title=d.title;try{c.notebooks.get(d.id)&&raise("duplicate");console.log("no such nb",d.id);console.log("import notebook");e=c.notebooks.create(d);e.readyCells();
f=function(a){return e.cells.create(a)};g=0;for(h=a.length;g<h;g++)b=a[g],f(b);return e}catch(i){return alert("Could not import notebook probably because it already exists.  try deleting"),console.log(i)}};d=function(){c.mathjaxReady=!0;return c.app.mathjaxReady()};$(document).ready(function(){console.log("creating app");c.notebooks=new Notebooks;c.notebooks.fetch();c.mathjaxReady=!1;c.router=new f;Backbone.history.start();return MathJax.Hub.Register.StartupHook("End",d)})}).call(this);
